<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"></script>
    <script src="../Paletteron.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOMContentLoaded');
            const paletteron = new Paletteron(0.3, 5);
            // For each image
            const imgHolders = document.querySelectorAll('.img-holder');
            imgHolders.forEach(imgHolder => {
                const img = imgHolder.querySelector('img');
                const paletteElement = imgHolder.querySelector('.palette');

                // Add listener to wait for image to be loaded
                if (img.complete) {
                    console.log('Image already loaded');
                    const palette = paletteron.getPalette(img);
                    paletteron.printDebuggingPalette(palette, paletteElement);
                } else {
                    img.addEventListener('load', () => {
                        console.log('Image loaded');
                        const palette = paletteron.getPalette(img);
                        paletteron.printDebuggingPalette(palette, paletteElement);
                    });
                }
        
            });
        });
    </script>
    <style>
        .img-holder {
            position: relative;
            display: inline-block;
            margin: 5px;
        }
        .palette {
            color: black;
            line-height: 20px;
            padding: 2px 0;
        }
    </style>
</head>
<body>
    <div class="img-holder">
        <img src="img/Localiza.jpg" width="400" />
        <div class="palette"></div>
    </div>
    <div class="img-holder">
        <img src="img/Bite.jpg" width="400" />
        <div class="palette"></div>
    </div>
    <div class="img-holder">
        <img src="img/Loop_Earplugs.jpg" width="400" />
        <div class="palette"></div>
    </div>
    <div class="img-holder">
        <img src="img/Manychat.jpg" width="400" />
        <div class="palette"></div>
    </div>
    <div class="img-holder">
        <img src="img/Avon_HMO.jpg" width="400" />
        <div class="palette"></div>
    </div>
    <div class="img-holder">
        <img src="img/Cornerstone.jpg" width="400" />
        <div class="palette"></div>
    </div>
    <div class="img-holder">
        <img src="img/Garmin.jpg" width="400" />
        <div class="palette"></div>
    </div>
    <div class="img-holder">
        <img src="img/Meta.jpg" width="400" />
        <div class="palette"></div>
    </div>
    <div class="img-holder">
        <img src="img/Pearson_Language.jpg" width="400" />
        <div class="palette"></div>
    </div>
    <div class="img-holder">
        <img src="img/Lipton.jpg" width="400" />
        <div class="palette"></div>
    </div>
</body>
</html>

